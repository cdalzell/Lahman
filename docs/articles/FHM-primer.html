<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Primer for Full House Modeling ‚Ä¢ Lahman</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="‚Äùimage/svg+xml‚Äù" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet">
<link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Roboto_Slab-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Primer for Full House Modeling">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Lahman</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">13.0-0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/FHM-primer.html">Primer for Full House Modeling</a></li>
    <li><a class="dropdown-item" href="../articles/hits-by-type.html">Graphs of Hits By Type in MLB</a></li>
    <li><a class="dropdown-item" href="../articles/payroll.html">Team Payroll and the World Series</a></li>
    <li><a class="dropdown-item" href="../articles/run-scoring-trends.html">Run Scoring Trends</a></li>
    <li><a class="dropdown-item" href="../articles/strikeoutsandhr.html">Relationship Between Strikeouts and Home Runs</a></li>
    <li><a class="dropdown-item" href="../articles/vignette-intro.html">Vignette Introduction</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cdalzell/Lahman/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Primer for Full House Modeling</h1>
                        <h4 data-toc-skip class="author">Daniel J
Eck</h4>
            
            <h4 data-toc-skip class="date">2025-05-29</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/cdalzell/Lahman/blob/HEAD/vignettes/FHM-primer.Rmd" class="external-link"><code>vignettes/FHM-primer.Rmd</code></a></small>
      <div class="d-none name"><code>FHM-primer.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This primer is intended to develop the statistical intuition which
underlies the mechanics of <a href="https://projecteuclid.org/journals/annals-of-applied-statistics/volume-19/issue-2/Comparing-baseball-players-across-eras-via-novel-Full-House-Modeling/10.1214/24-AOAS1992.short" class="external-link">Full
House Modeling</a>. The intention is that this document can be followed
by a motivated individual with some formal exposure to mathematical
statistical concepts. Conceptually, Full House Modeling makes a
connection between distributions of observed measurements for
individuals in a system (e.g.¬†professional baseball league) and latent
aptitudes in a large source population (e.g.¬†talent pool). This
connection involves a formal pairing of latent aptitudes with
achievement so that an individual‚Äôs observed achievement is a function
of expressed latent aptitude. Often, studies involving Full House
Modeling focus on systems comprising individuals with the highest
aptitude, with primary interest in the top performers (e.g.¬†the most
talented baseball players in history).</p>
<p>The two main ingredients that make Full House Modeling work are <a href="https://en.wikipedia.org/wiki/Probability_integral_transform" class="external-link">probability
integral transformation</a> and <a href="https://en.wikipedia.org/wiki/Order_statistic" class="external-link">order
statistics</a>.</p>
<p>In this primer, we illustrate Full House Modeling through a
comparison of batting averages across eras, showing how latent aptitude
can differ from raw achievement for legendary players like Tony Gwynn
and Ty Cobb. A larger suite of era-adjusted baseball stats, including
broader applications to baseball history, is available at</p>
<p><a href="https://eckeraadjustment.web.illinois.edu/" class="external-link uri">https://eckeraadjustment.web.illinois.edu/</a></p>
</div>
<div class="section level2">
<h2 id="ingredients-for-full-house-modeling">Ingredients for Full House Modeling<a class="anchor" aria-label="anchor" href="#ingredients-for-full-house-modeling"></a>
</h2>
<div class="section level3">
<h3 id="probability-integral-transform">Probability Integral Transform<a class="anchor" aria-label="anchor" href="#probability-integral-transform"></a>
</h3>
<p>Suppose that we have random variable
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>
from some cumulative distribution function
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>F</mi><annotation encoding="application/x-tex">F</annotation></semantics></math>.
Then the probability integral transform states that the transformed
variable
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>Y</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">F(Y)</annotation></semantics></math>
follows a uniform distribution on the interval
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">[0, 1]</annotation></semantics></math>,
i.e.,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>Y</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>‚àº</mo><mtext mathvariant="normal">Uniform</mtext><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">F(Y) \sim \text{Uniform}(0,1)</annotation></semantics></math>.</p>
<p>We can confirm this result via simulation. Suppose that
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mo>‚àº</mo><mi>N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">Y \sim N(0,1)</annotation></semantics></math>,
the standard normal distribution. The code below generates
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>=</mo><mn>1</mn><mo>,</mo><mn>000</mn></mrow><annotation encoding="application/x-tex">B = 1,000</annotation></semantics></math>
realizations of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>,
transforms them using
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><mtext mathvariant="monospace">ùöôùöóùöòùöõùöñ</mtext></mrow><annotation encoding="application/x-tex">F = \texttt{pnorm}</annotation></semantics></math>,
and stores the result in the vector .</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">B</span> <span class="op">=</span> <span class="fl">1e3</span></span>
<span><span class="va">u</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">pnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">B</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>To verify that the values in are approximately uniformly distributed,
we construct a <a href="https://en.wikipedia.org/wiki/Q%E2%80%93Q_plot" class="external-link">Q-Q plot</a>,
which compares the quantiles of the observed values in to the
theoretical quantiles of the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Uniform</mtext><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\text{Uniform}(0,1)</annotation></semantics></math>
distribution. For the theoretical quantiles, we use the plotting
positions
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>/</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>B</mi><mo>+</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">i/(B+1)</annotation></semantics></math>,
which avoid the extremes of 0 and 1 and are commonly used in Q-Q
plotting for Uniform distributions. If the values in follow a uniform
distribution, the Q-Q plot will closely follow a 45-degree reference
line, indicating good agreement between the empirical and theoretical
quantiles. That is exactly what we observe.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">u_true</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">B</span> <span class="op">/</span> <span class="op">(</span><span class="va">B</span><span class="op">+</span><span class="fl">1</span><span class="op">)</span> <span class="co"># almost true uniform quantiles (slight bias in tails)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">u_true</span>, <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">u</span><span class="op">)</span>, pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.25</span>, </span>
<span>     main <span class="op">=</span> <span class="st">"Uniform Q-Q Plot"</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Theoretical Quantiles"</span>, </span>
<span>     ylab <span class="op">=</span> <span class="st">"Observed Quantiles"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">u_true</span>, <span class="va">u_true</span>, lty <span class="op">=</span> <span class="fl">2</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<p><img src="FHM-primer_files/figure-html/unnamed-chunk-2-1.png" width="672"></p>
<p>The probability integral transform also allows a reverse
relationship. Let
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>F</mi><mrow><mi>‚àí</mi><mn>1</mn></mrow></msup><annotation encoding="application/x-tex">F^{-1}</annotation></semantics></math>
denote the inverse cumulative distribution function,
i.e.¬†<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>F</mi><mrow><mi>‚àí</mi><mn>1</mn></mrow></msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>Y</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">F^{-1}(F(Y)) = Y</annotation></semantics></math>.
Then we can start with a realization
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi><mo>‚àº</mo><mtext mathvariant="normal">Uniform</mtext><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">U \sim \text{Uniform}(0,1)</annotation></semantics></math>
and transform it into a realization of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>
via
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mo>=</mo><msup><mi>F</mi><mrow><mi>‚àí</mi><mn>1</mn></mrow></msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>U</mi><mo stretchy="true" form="postfix">)</mo></mrow><mi>.</mi></mrow><annotation encoding="application/x-tex">
 Y = F^{-1}(U).
</annotation></semantics></math></p>
</div>
<div class="section level3">
<h3 id="order-statistics">Order Statistics<a class="anchor" aria-label="anchor" href="#order-statistics"></a>
</h3>
<p>Now suppose that we have a random sample
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Y</mi><mn>1</mn></msub><mo>,</mo><mi>‚Ä¶</mi><mo>,</mo><msub><mi>Y</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">Y_1, \ldots, Y_n</annotation></semantics></math>
realized as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
independent and identically distributed (iid) observations from some
distribution
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>F</mi><annotation encoding="application/x-tex">F</annotation></semantics></math>
with probability density function
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>f</mi><annotation encoding="application/x-tex">f</annotation></semantics></math>.
This sample of observations can be reordered from smallest to largest
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo>&lt;</mo><mi>‚ãØ</mi><mo>&lt;</mo><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">Y_{(1)} &lt; \cdots &lt; Y_{(n)}</annotation></semantics></math>.
Each of these order statistics
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><annotation encoding="application/x-tex">Y_{(r)}</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>‚Ä¶</mi><mo>,</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">r = 1,\ldots,n</annotation></semantics></math>
has its own cumulative distribution function
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>F</mi><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub></msub><annotation encoding="application/x-tex">F_{Y_{(r)}}</annotation></semantics></math>
and corresponding probability density function
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>f</mi><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub></msub><annotation encoding="application/x-tex">f_{Y_{(r)}}</annotation></semantics></math>.
These are given by:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"><msub><mi>F</mi><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><munderover><mo>‚àë</mo><mrow><mi>j</mi><mo>=</mo><mi>r</mi></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">(</mo><mfrac linethickness="0"><mi>n</mi><mi>r</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><msup><mrow><mo stretchy="true" form="prefix">[</mo><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">]</mo></mrow><mi>j</mi></msup><msup><mrow><mo stretchy="true" form="prefix">[</mo><mn>1</mn><mo>‚àí</mo><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">]</mo></mrow><mrow><mi>n</mi><mo>‚àí</mo><mi>j</mi></mrow></msup><mo>,</mo></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><msub><mi>f</mi><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow></mtd><mtd columnalign="left" style="text-align: left"><mo>=</mo><mfrac><mrow><mi>n</mi><mi>!</mi></mrow><mrow><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo>‚àí</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><mi>!</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo>‚àí</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow><mi>!</mi></mrow></mfrac><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow><msup><mrow><mo stretchy="true" form="prefix">[</mo><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">]</mo></mrow><mrow><mi>r</mi><mo>‚àí</mo><mn>1</mn></mrow></msup><msup><mrow><mo stretchy="true" form="prefix">[</mo><mn>1</mn><mo>‚àí</mo><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">]</mo></mrow><mrow><mi>n</mi><mo>‚àí</mo><mi>r</mi></mrow></msup><mo>,</mo></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align*}
  F_{Y_{(r)}}(y) &amp;= \sum_{j=r}^n \binom{n}{r} \left[F(y)\right]^j\left[1-F(y)\right]^{n-j}, \\
  f_{Y_{(r)}}(y) &amp;= \frac{n!}{(r-1)!(n-r)!} f(y) \left[F(y)\right]^{r-1}\left[1-F(y)\right]^{n-r},
\end{align*}</annotation></semantics></math> where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mfrac linethickness="0"><mi>n</mi><mi>r</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\binom{n}{r}</annotation></semantics></math>
is the <a href="https://en.wikipedia.org/wiki/Binomial_coefficient" class="external-link">binomial
coefficient</a>. As a simple example, consider the maximum order
statistic by setting
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>=</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">r = n</annotation></semantics></math>.
In this case, the cumulative distribution function and probability
density function simplify as follows:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"><msub><mi>F</mi><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><msup><mrow><mo stretchy="true" form="prefix">[</mo><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">]</mo></mrow><mi>n</mi></msup><mo>,</mo><mspace width="2.0em"></mspace><mtext mathvariant="normal">and</mtext><mspace width="2.0em"></mspace><msub><mi>f</mi><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mi>n</mi><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow><msup><mrow><mo stretchy="true" form="prefix">[</mo><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">]</mo></mrow><mrow><mi>n</mi><mo>‚àí</mo><mn>1</mn></mrow></msup><mi>.</mi></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align*}
  F_{Y_{(n)}}(y) = \left[F(y)\right]^n, \qquad \text{and} \qquad
  f_{Y_{(n)}}(y) = nf(y) \left[F(y)\right]^{n-1}.
\end{align*}</annotation></semantics></math></p>
<p>We can verify this distributional result through simulation. Let
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">n = 100</annotation></semantics></math>
denote the sample size and we will generate data according to the
standard normal distribution. In general the distribution of the maximum
value is
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mrow><mo stretchy="true" form="prefix">[</mo><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>y</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">]</mo></mrow><mi>n</mi></msup><annotation encoding="application/x-tex">\left[F(y)\right]^{n}</annotation></semantics></math>.</p>
<p>To simulate from this distribution, we generate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>=</mo><mn>1000</mn></mrow><annotation encoding="application/x-tex">B = 1000</annotation></semantics></math>
samples of size
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
from the standard normal, compute their maximums, apply the CDF (i.e.,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><mtext mathvariant="monospace">ùöôùöóùöòùöõùöñ</mtext></mrow><annotation encoding="application/x-tex">F = \texttt{pnorm}</annotation></semantics></math>),
and raise to the power
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>,
yielding values distributed as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mrow><mo stretchy="true" form="prefix">[</mo><mi>F</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">]</mo></mrow><mi>n</mi></msup><annotation encoding="application/x-tex">\left[F(Y_{(n)})\right]^n</annotation></semantics></math>.
The probability integral transform implies that these values should
follow a
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Uniform</mtext><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\text{Uniform}(0,1)</annotation></semantics></math>
distribution. We can assess this using a Q-Q plot, comparing the
empirical quantiles from these transformed maximums to the theoretical
quantiles of a
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="monospace">ùöÑùöóùöíùöèùöòùöõùöñ</mtext><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\texttt{Uniform}(0,1)</annotation></semantics></math>
distribution.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n</span> <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="va">u_obs</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">replicate</a></span><span class="op">(</span><span class="va">B</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">pnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">u_true</span>, <span class="va">u_obs</span>, pch <span class="op">=</span> <span class="fl">19</span>, cex <span class="op">=</span> <span class="fl">0.25</span>, </span>
<span>     main <span class="op">=</span> <span class="st">"Uniform Q-Q Plot for Maximum of 100 Normals"</span>,</span>
<span>     xlab <span class="op">=</span> <span class="st">"Theoretical Quantiles"</span>, </span>
<span>     ylab <span class="op">=</span> <span class="st">"Observed Quantiles"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">u_true</span>,<span class="va">u_true</span>, lty <span class="op">=</span> <span class="fl">2</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<p><img src="FHM-primer_files/figure-html/unnamed-chunk-3-1.png" width="672"></p>
</div>
</div>
<div class="section level2">
<h2 id="the-core-of-full-house-modeling">The Core of Full House Modeling<a class="anchor" aria-label="anchor" href="#the-core-of-full-house-modeling"></a>
</h2>
<p>Full House Modeling builds on the concepts of the probability
integral transform and order statistics to connect a latent distribution
of aptitude
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
to observed achievement
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>.
A key feature of the framework is that aptitudes are defined for all
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math>
individuals in a source population, but only a subset of size
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
is selected to form the system for which achievement is observed.</p>
<div class="section level3">
<h3 id="simple-setup-one-source-population-and-system">Simple Setup: one source population and system<a class="anchor" aria-label="anchor" href="#simple-setup-one-source-population-and-system"></a>
</h3>
<p>In its simplest form, we assume that the individuals with the highest
latent aptitudes are selected into the system. That is, achievement
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>
is only observed for the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
individuals with the highest latent aptitudes:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>‚àí</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo>,</mo><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>‚àí</mo><mi>n</mi><mo>+</mo><mn>2</mn><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo>,</mo><mi>‚Ä¶</mi><mo>,</mo><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">X_{(N - n + 1)}, X_{(N - n + 2)}, \ldots, X_{(N)}</annotation></semantics></math>.</p>
<p>To connect the distribution of aptitude to that of achievement, we
impose a rank-preserving pairing. Under this pairing, the individual
with the highest achievement is assumed to have the highest latent
aptitude, so the top pair is
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo>,</mo><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(X_{(N)}, Y_{(n)})</annotation></semantics></math>;
the second-highest achiever is paired with the second-highest aptitude
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>‚àí</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo>,</mo><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo>‚àí</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(X_{(N-1)}, Y_{(n-1)})</annotation></semantics></math>,
and so on. In general, for each
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>‚Ä¶</mi><mo>,</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">r = 1, \ldots, n</annotation></semantics></math>,
we pair:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>‚àí</mo><mi>n</mi><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo>,</mo><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mi>.</mi></mrow><annotation encoding="application/x-tex">
(X_{(N - n + r)}, Y_{(r)}).
</annotation></semantics></math> This setup allows us to generate
achievement values from latent aptitudes using the composition of
distribution functions:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo>=</mo><msubsup><mi>F</mi><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mrow><mi>‚àí</mi><mn>1</mn></mrow></msubsup><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>F</mi><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>‚àí</mo><mi>n</mi><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub></msub><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>‚àí</mo><mi>n</mi><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">]</mo></mrow><mo>,</mo></mrow><annotation encoding="application/x-tex">\begin{equation} 
  Y_{(r)} = F_{Y_{(r)}}^{-1} \left[ F_{X_{(N - n + r)}} \left( X_{(N - n + r)} \right) \right],
\end{equation}</annotation></semantics></math> where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>F</mi><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>‚àí</mo><mi>n</mi><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub></msub><annotation encoding="application/x-tex">F_{X_{(N - n + r)}}</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>F</mi><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub></msub><annotation encoding="application/x-tex">F_{Y_{(r)}}</annotation></semantics></math>
denote the cumulative distribution functions of the corresponding order
statistics.</p>
<p>This generation rule mirrors the logic of the probability integral
transform: we first compute the percentile of the latent aptitude
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>‚àí</mo><mi>n</mi><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><annotation encoding="application/x-tex">X_{(N-n+r)}</annotation></semantics></math>
within its distribution using
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>‚àí</mo><mi>n</mi><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub></msub><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>‚àí</mo><mi>n</mi><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">F_{X_{(N - n + r)}} \left( X_{(N - n + r)} \right)</annotation></semantics></math>,
which yields a value on the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">[0,1]</annotation></semantics></math>
scale. This quantity can be interpreted as a draw from a uniform random
variable. We then map this percentile into the achievement scale using
the inverse cumulative distribution function
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>F</mi><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mrow><mi>‚àí</mi><mn>1</mn></mrow></msubsup><annotation encoding="application/x-tex">F_{Y_{(r)}}^{-1}</annotation></semantics></math>,
producing the corresponding value
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><annotation encoding="application/x-tex">Y_{(r)}</annotation></semantics></math>.
In this way, each achievement value preserves the rank structure of its
paired latent aptitude through distributional matching.</p>
<p>Conversely, we can recover latent aptitude scores from observed
achievement by inverting the relationship:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>‚àí</mo><mi>n</mi><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo>=</mo><msubsup><mi>F</mi><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>‚àí</mo><mi>n</mi><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mrow><mi>‚àí</mi><mn>1</mn></mrow></msubsup><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>F</mi><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub></msub><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">]</mo></mrow><mi>.</mi></mrow><annotation encoding="application/x-tex">\begin{equation}
  X_{(N - n + r)} = F_{X_{(N - n + r)}}^{-1} \left[ F_{Y_{(r)}} \left( Y_{(r)} \right) \right].
\end{equation}</annotation></semantics></math></p>
<p>This is the core of Full House Modeling in the setting where
achievement is observed only for the most capable individuals from a
larger population. The key insight is that matching the marginal
distributions of ranked latent and observed variables provides a
principled way to translate between aptitude and achievement.</p>
</div>
<div class="section level3">
<h3 id="more-general-setup-multiple-source-populations-and-systems">More General Setup: multiple source populations and systems<a class="anchor" aria-label="anchor" href="#more-general-setup-multiple-source-populations-and-systems"></a>
</h3>
<p>The previous generation rules for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><annotation encoding="application/x-tex">Y_{(r)}</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>‚àí</mo><mi>n</mi><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><annotation encoding="application/x-tex">X_{(N - n + r)}</annotation></semantics></math>
can be extended to allow for multiple source populations and systems
indexed by
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>.
Let</p>
<ul>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>N</mi><mi>i</mi></msub><annotation encoding="application/x-tex">N_i</annotation></semantics></math>
be the size of source population
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>,</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>n</mi><mi>i</mi></msub><annotation encoding="application/x-tex">n_i</annotation></semantics></math>
be the size of system
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>,</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>F</mi><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub></msub><annotation encoding="application/x-tex">F_{Y_{i,(r)}}</annotation></semantics></math>
be the cumulative distribution function for achievement of individuals
in system
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>.</li>
</ul>
<p>Under this setup
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><annotation encoding="application/x-tex">Y_{(r)}</annotation></semantics></math>
becomes
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub><mo>=</mo><msubsup><mi>F</mi><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub><mrow><mi>‚àí</mi><mn>1</mn></mrow></msubsup><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>F</mi><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>N</mi><mi>i</mi></msub><mo>‚àí</mo><msub><mi>n</mi><mi>i</mi></msub><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub></msub><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>N</mi><mi>i</mi></msub><mo>‚àí</mo><msub><mi>n</mi><mi>i</mi></msub><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">]</mo></mrow><mo>,</mo></mrow><annotation encoding="application/x-tex">\begin{equation} 
  Y_{i,(r)} = F_{Y_{i,(r)}}^{-1} \left[ F_{X_{(N_i - n_i + r)}} \left( X_{(N_i - n_i + r)} \right) \right],
\end{equation}</annotation></semantics></math> and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>‚àí</mo><mi>n</mi><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><annotation encoding="application/x-tex">X_{(N - n + r)}</annotation></semantics></math>
becomes
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>N</mi><mi>i</mi></msub><mo>‚àí</mo><msub><mi>n</mi><mi>i</mi></msub><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo>=</mo><msubsup><mi>F</mi><msub><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>N</mi><mi>i</mi></msub><mo>‚àí</mo><msub><mi>n</mi><mi>i</mi></msub><mo>+</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></msub><mrow><mi>‚àí</mi><mn>1</mn></mrow></msubsup><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>F</mi><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub></msub><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>r</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">]</mo></mrow><mi>.</mi></mrow><annotation encoding="application/x-tex">\begin{equation} \label{eq:genXi}
  X_{(N_i - n_i + r)} = F_{X_{(N_i - n_i + r)}}^{-1} \left[ F_{Y_{i,(r)}} \left( Y_{i,(r)} \right) \right].
\end{equation}</annotation></semantics></math> Notice that the
cumulative distribution function
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>F</mi><mi>X</mi></msub><annotation encoding="application/x-tex">F_X</annotation></semantics></math>
is not assumed to change across source populations. The only differences
across the source populations is that the sizes differ. This is for
studies where distributions of aptitude is thought not to change but how
aptitude is expressed changes.</p>
</div>
</div>
<div class="section level2">
<h2 id="example-comparing-batting-averages-across-eras">Example: Comparing Batting Averages Across Eras<a class="anchor" aria-label="anchor" href="#example-comparing-batting-averages-across-eras"></a>
</h2>
<p>We now demonstrate Full House Modeling using a simple comparison
between Ty Cobb‚Äôs MLB-leading batting average in 1911 and Tony Gwynn‚Äôs
MLB-leading batting average in 1997. This comparison served as the
motivating example for the development of Full House Modeling‚Äôs working
mechanics in the <a href="https://arxiv.org/abs/2207.11332" class="external-link">original
Full House Modeling paper</a> (see the last paragraph of Section 2 at
the linked reference). We first load the necessary R packages and
perform some basic preprocessing.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># software</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cdalzell.github.io/Lahman/" class="external-link">Lahman</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#install.packages("devtools")</span></span>
<span><span class="co">#library(devtools)</span></span>
<span><span class="co">#devtools::install_github(repo = "DEck13/fullhouse")</span></span>
<span><span class="co">#library(fullhouse)</span></span>
<span></span>
<span><span class="co"># version numbers</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"Lahman"</span><span class="op">)</span></span>
<span><span class="co">## [1] '13.0.0'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span>
<span><span class="co">## [1] '2.0.0'</span></span>
<span><span class="co">#packageVersion("fullhouse")</span></span>
<span></span>
<span><span class="co"># data preprocessing</span></span>
<span><span class="va">foo</span> <span class="op">=</span> <span class="va">Batting</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># get years 1911 and 1997</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">yearID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1911</span>, <span class="fl">1997</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># compute batting average</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>BA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">H</span><span class="op">/</span><span class="va">AB</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># get player names</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">People</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">nameFirst</span>, <span class="va">nameLast</span>, sep <span class="op">=</span> <span class="st">" "</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># subset columns</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">yearID</span>, <span class="va">AB</span>, <span class="va">BA</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># only consider full-time players</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">AB</span> <span class="op">&gt;=</span> <span class="fl">320</span><span class="op">)</span></span></code></pre></div>
<p>We see that Ty Cobb‚Äôs batting average was much higher than Tony
Gwynn‚Äôs.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">max_BA</span> <span class="op">=</span> <span class="va">foo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>name <span class="op">=</span> <span class="va">name</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">BA</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">BA</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>, max_BA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">BA</span><span class="op">)</span>, .by <span class="op">=</span> <span class="va">yearID</span><span class="op">)</span></span>
<span><span class="va">max_BA</span></span>
<span><span class="co">##   yearID       name max_BA</span></span>
<span><span class="co">## 1   1997 Tony Gwynn  0.372</span></span>
<span><span class="co">## 2   1911    Ty Cobb  0.420</span></span></code></pre></div>
<p>However, distributions of batting averages among full-time players
have changed across eras. Here we define full-time players as those with
320 ABs (about two ABs per game, as defined on page 105 in Stephen Jay
Gould‚Äôs 1996 book <a href="https://archive.org/details/fullhouse00step" class="external-link">Full House: The
Spread of Excellence from Plato to Darwin</a>). Both the means and
standard deviations were higher in 1911.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">means_sds</span> <span class="op">=</span> <span class="va">foo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_BA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">BA</span><span class="op">)</span>, sd_BA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">BA</span><span class="op">)</span>, .by <span class="op">=</span> <span class="va">yearID</span><span class="op">)</span></span>
<span><span class="va">means_sds</span></span>
<span><span class="co">##   yearID mean_BA   sd_BA</span></span>
<span><span class="co">## 1   1997  0.2769 0.02869</span></span>
<span><span class="co">## 2   1911  0.2835 0.03908</span></span></code></pre></div>
<p>A simple visual comparison reveals that the 1911 distribution was
more heavy-tailed, although both distributions appear approximately
normal (a Shapiro Wilk test rejects normality for the 1911 distribution
when testing at
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Œ±</mi><mo>=</mo><mn>0.05</mn></mrow><annotation encoding="application/x-tex">\alpha = 0.05</annotation></semantics></math>).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">BA</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">yearID</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html" class="external-link">geom_density</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"yearID"</span><span class="op">)</span></span></code></pre></div>
<p><img src="FHM-primer_files/figure-html/unnamed-chunk-7-1.png" width="672"></p>
<div class="section level3">
<h3 id="z-scores">Z-scores<a class="anchor" aria-label="anchor" href="#z-scores"></a>
</h3>
<p>One simple era-adjustment technique is to scale the separate
distributions and compute Z-scores of batting averages,
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Z</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>=</mo><mfrac><mrow><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>‚àí</mo><msub><mover><mi>Œº</mi><mo accent="true">ÃÇ</mo></mover><mi>i</mi></msub></mrow><msub><mover><mi>œÉ</mi><mo accent="true">ÃÇ</mo></mover><mi>i</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">
  Z_{i,j} = \frac{Y_{i,j} - \hat{\mu}_i}{\hat{\sigma}_i}
</annotation></semantics></math> where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">Y_{i,j}</annotation></semantics></math>
is an observed batting average for individual
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math>
from year
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mover><mi>Œº</mi><mo accent="true">ÃÇ</mo></mover><mi>i</mi></msub><annotation encoding="application/x-tex">\hat{\mu}_i</annotation></semantics></math>
is the estimated mean batting average of full-time players from year
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>,
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mover><mi>œÉ</mi><mo accent="true">ÃÇ</mo></mover><mi>i</mi></msub><annotation encoding="application/x-tex">\hat{\sigma}_i</annotation></semantics></math>
is the estimated standard deviation of batting averages for full-time
players from year
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>.</p>
<p>Computing Z-scores for batting events as an era-adjustment technique
has been common for decades. For example, see Jim Albert‚Äôs <a href="https://jse.amstat.org/v10n2/albert.html" class="external-link">2002 Baseball Course
primer</a>, Michael J Schell‚Äôs <a href="https://sabr.org/journal/article/tony-gwynn-meeting-baseballs-best-hitter/" class="external-link">2019
SABR article</a>, and Benjamin Alter‚Äôs <a href="https://sabr.org/journal/article/using-z-scores-to-measure-player-performance/" class="external-link">2025
SABR article</a>. The code below computes the maximum Z-scores for each
season. We see that Ty Cobb still rates ahead of Tony Gwynn, his
performance was slightly more standard deviations above the mean than
Gwynn‚Äôs.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">foo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>name <span class="op">=</span> <span class="va">name</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">BA</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">BA</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>, </span>
<span>            Z_max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">BA</span><span class="op">)</span><span class="op">)</span>, </span>
<span>            .by <span class="op">=</span> <span class="va">yearID</span><span class="op">)</span></span>
<span><span class="co">##   yearID       name Z_max</span></span>
<span><span class="co">## 1   1997 Tony Gwynn 3.313</span></span>
<span><span class="co">## 2   1911    Ty Cobb 3.493</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="full-house-modeling">Full House Modeling<a class="anchor" aria-label="anchor" href="#full-house-modeling"></a>
</h3>
<p>Now we obtain the talent pool sizes and the number of full-time
players for both the 1911 and 1997 seasons. Talent pool sizes are in the
R package. These were estimated following the procedure described in <a href="https://eckeraadjustment.web.illinois.edu/MLBeligiblepop.html" class="external-link">this
technical report</a>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># talent pool size (from fullhouse package)</span></span>
<span><span class="va">N_1911</span> <span class="op">=</span> <span class="fl">1694866</span></span>
<span><span class="va">N_1997</span> <span class="op">=</span> <span class="fl">9669798</span></span>
<span></span>
<span><span class="co"># number of full-time players</span></span>
<span><span class="va">ns</span> <span class="op">=</span> <span class="va">foo</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>, .by <span class="op">=</span> <span class="va">yearID</span><span class="op">)</span></span>
<span><span class="va">n_1911</span> <span class="op">=</span> <span class="va">ns</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">yearID</span> <span class="op">==</span> <span class="fl">1911</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="va">n_1997</span> <span class="op">=</span> <span class="va">ns</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">yearID</span> <span class="op">==</span> <span class="fl">1997</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span></code></pre></div>
<p>We get the means and standard deviations of batting averages for
full-time players from 1911 and 1997.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># means and standard deviations for BA from 1911 </span></span>
<span><span class="va">means_sds_1911</span> <span class="op">=</span> <span class="va">means_sds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">yearID</span> <span class="op">==</span> <span class="fl">1911</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">mean_BA</span>, <span class="va">sd_BA</span><span class="op">)</span></span>
<span><span class="co"># means and standard deviations for BA from 1997</span></span>
<span><span class="va">means_sds_1997</span> <span class="op">=</span> <span class="va">means_sds</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">yearID</span> <span class="op">==</span> <span class="fl">1997</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">mean_BA</span>, <span class="va">sd_BA</span><span class="op">)</span></span></code></pre></div>
<p>We now compute the extreme batting average percentiles,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>F</mi><mi>i</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>n</mi><mi>i</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><msub><mi>n</mi><mi>i</mi></msub></msup><annotation encoding="application/x-tex">\left(F_i(Y_{i,(n_i)})\right)^{n_i}</annotation></semantics></math>,
for Ty Cobb and Tony Gwynn. These percentiles behave like realizations
from a
Uniform<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(0,1)</annotation></semantics></math>
distribution. Again, we see that Ty Cobb stood further above his
peers.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># max BA from 1911 </span></span>
<span><span class="va">max_BA_1911</span> <span class="op">=</span> <span class="va">max_BA</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">yearID</span> <span class="op">==</span> <span class="fl">1911</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">max_BA</span><span class="op">)</span></span>
<span><span class="co"># max BA from 1997 </span></span>
<span><span class="va">max_BA_1997</span> <span class="op">=</span> <span class="va">max_BA</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">yearID</span> <span class="op">==</span> <span class="fl">1997</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">max_BA</span><span class="op">)</span></span>
<span><span class="co"># 1911 Ty Cobb's extreme batting average percentile</span></span>
<span><span class="va">F_max_1911</span> <span class="op">=</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">pnorm</a></span><span class="op">(</span><span class="va">max_BA_1911</span>, </span>
<span>        mean <span class="op">=</span> <span class="va">means_sds_1911</span><span class="op">$</span><span class="va">mean_BA</span>, </span>
<span>        sd <span class="op">=</span> <span class="va">means_sds_1911</span><span class="op">$</span><span class="va">sd_BA</span><span class="op">)</span><span class="op">^</span><span class="va">n_1911</span></span>
<span><span class="va">F_max_1911</span></span>
<span><span class="co">## [1] 0.9747</span></span>
<span><span class="co"># 1997 Tony Gwynn's extreme batting average percentile</span></span>
<span><span class="va">F_max_1997</span> <span class="op">=</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">pnorm</a></span><span class="op">(</span><span class="va">max_BA_1997</span>, </span>
<span>        mean <span class="op">=</span> <span class="va">means_sds_1997</span><span class="op">$</span><span class="va">mean_BA</span>, </span>
<span>        sd <span class="op">=</span> <span class="va">means_sds_1997</span><span class="op">$</span><span class="va">sd_BA</span><span class="op">)</span><span class="op">^</span><span class="va">n_1997</span></span>
<span><span class="va">F_max_1997</span></span>
<span><span class="co">## [1] 0.9054</span></span></code></pre></div>
<p>We now estimate
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mrow><mi>i</mi><mo>,</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>N</mi><mi>i</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub><annotation encoding="application/x-tex">X_{i,(N_i)}</annotation></semantics></math>
assuming that batting average aptitude is realized according to a
standard normal distribution. Surprisingly, we find that 1997 Tony Gwynn
had a higher inferred aptitude than 1911 Ty Cobb!</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># aptitude for 1911 Ty Cobb</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="va">F_max_1911</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="va">N_1911</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## [1] 5.54</span></span>
<span><span class="co"># aptitude for 1997 Tony Gwynn</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="va">F_max_1997</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="va">N_1997</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## [1] 5.607</span></span></code></pre></div>
<p>While the assumption of a standard normal latent distribution might
initially seem strong, the conclusions are actually robust to the choice
of distribution. This is because the general equation for obtaining
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mrow><mi>i</mi><mo>,</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>N</mi><mi>i</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub><annotation encoding="application/x-tex">X_{i,(N_i)}</annotation></semantics></math>
involves an input for the quantile function
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>F</mi><mi>X</mi><mrow><mi>‚àí</mi><mn>1</mn></mrow></msubsup><mrow><mo stretchy="true" form="prefix">(</mo><mi>‚ãÖ</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">F_{X}^{-1}(\cdot)</annotation></semantics></math>
of the form
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>F</mi><mi>i</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>n</mi><mi>i</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mrow><msub><mi>n</mi><mi>i</mi></msub><mi>/</mi><msub><mi>N</mi><mi>i</mi></msub></mrow></msup><mo>,</mo></mrow><annotation encoding="application/x-tex">
  \left(F_i(Y_{i,(n_i)})\right)^{n_i/N_i},
</annotation></semantics></math> and this value is higher for 1997 Tony
Gwynn than it is for 1911 Ty Cobb.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># input for 1997 Tony Gwynn</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%.10f"</span>, <span class="va">F_max_1997</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="va">N_1997</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## [1] "0.9999999897"</span></span>
<span><span class="co"># input for 1911 Ty Cobb</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%.10f"</span>, <span class="va">F_max_1911</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="va">N_1911</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## [1] "0.9999999849"</span></span></code></pre></div>
<p>In general the quantile function
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>F</mi><mi>X</mi><mrow><mi>‚àí</mi><mn>1</mn></mrow></msubsup><mrow><mo stretchy="true" form="prefix">(</mo><mi>‚ãÖ</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">F_{X}^{-1}(\cdot)</annotation></semantics></math>
is non-decreasing. Thus any choice for the talent generating process
will yield the same conclusion under this Full House Model:</p>
<p><strong>1997 Tony Gwynn had higher latent batting average aptitude
than 1911 Ty Cobb, even though raw batting averages and Z-scores suggest
otherwise. This reversal reflects Gwynn dominating a vastly larger
source population than Cobb.</strong></p>
</div>
</div>
<div class="section level2">
<h2 id="discussion">Discussion<a class="anchor" aria-label="anchor" href="#discussion"></a>
</h2>
<p>Michael Schell‚Äôs 2019 SABR article, referenced earlier, focused on
comparing the career batting averages of Tony Gwynn and Ty Cobb. Using a
Z-score based analysis, Schell concluded that Gwynn‚Äôs relative
performance was stronger. His article appeared in <a href="https://sabr.org/journals/pacific-ghosts/" class="external-link">The National Pastime:
Pacific Ghosts (San Diego, 2019)</a>, a SABR collection that was
published roughly five years after Gwynn‚Äôs death.</p>
<p>Earlier, in his 2005 book <a href="https://www.jstor.org/stable/j.ctt19705ks" class="external-link">Baseball‚Äôs All-Time
Best Sluggers: Adjusted Batting Performance from Strikeouts to Home
Runs</a>, Schell had acknowledged the limitations of Z-score based
adjustments. On page 58, he noted (paraphrased slightly):</p>
<p>‚ÄúSomeday we will need to abandon the use of the standard deviation as
a talent pool adjustment altogether and search for another talent pool
adjustment method, likely involving more difficult statistical methods
than those used in this book.‚Äù</p>
<p>Full House Modeling provides such a method. It directly connects
achievement to underlying talent, after accounting for talent pool size
through explicit modeling inputs.</p>
<p>The name ‚ÄúFull House‚Äù is a deliberate reference to Stephen Jay
Gould‚Äôs 1996 book <a href="https://archive.org/details/fullhouse00step" class="external-link">Full House: The
Spread of Excellence from Plato to Darwin</a>. In that book, Gould
argued that the disappearance of 0.400 hitting in baseball reflected a
general improvement of play and a narrowing of variation in performance,
rather than a decline in greatness. Gould had originally introduced this
argument in his 1986 essay, ‚ÄúEntropic Homogeneity Isn‚Äôt Why No One Hits
.400 Anymore.‚Äù</p>
<p>Gould‚Äôs work provided the conceptual groundwork linking talent pool
expansion, training improvements, and shrinking variance in achievement.
However, a formal mathematical framework connecting these ideas to an
era-adjustment method for player achievement did not emerge until much
later. Full House Modeling builds on these insights by providing a
statistical apparatus for relating observed achievements to underlying
aptitudes across changing competitive environments.</p>
<p>At the time of Schell‚Äôs 2019 article, Z-score based methods and other
standard deviation-based approaches remained standard practice for era
adjustment. Full House Modeling represents a further step in formalizing
and extending the conceptual foundations laid by earlier work.</p>
<p>A suite of era-adjusted statistics obtained through Full House
Modeling is available here:</p>
<p><a href="https://eckeraadjustment.web.illinois.edu/" class="external-link uri">https://eckeraadjustment.web.illinois.edu/</a></p>
<p>Several preprocessing steps, including handedness-specific park
factor adjustments building on Michael Schell‚Äôs earlier work, were
incorporated into the computation of era-adjusted batting averages on
this website.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Shen Yan, Adrian Burgos Jr., Christopher Kinson, and Daniel J. Eck
(2025). Comparing baseball players across eras via novel Full House
Modeling. <em>Annals of Applied Statistics</em>, 19(2): 1778-1799. DOI:
10.1214/24-AOAS1992.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael Friendly, Chris Dalzell, Martin Monkman, Dennis Murphy.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
